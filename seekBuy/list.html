<!doctype html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport"
        content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
  <link rel="stylesheet" href="../css/swiper.min.css">
  <script src="../js/swiper.min.js"></script>
  <script src="../js/h5rem.js"></script>
  <link rel="stylesheet" href="../css/style.css">
  <script src="../js/jquery-2.1.4.min.js"></script>   <script src="../js/jquery.lazyload.js"></script>
  <script src="../js/jquery.lazyload.js"></script>
  <script src="../js/public.js"></script>
</head>
<body>
<!--返回上一页-->
<div class="return">
  <i onclick="history.go(-1)"></i>
  求购列表
</div>
<div class="voucher">
  <!--<div class="voucher-mask"></div>-->
  <div class="buy-sub-nav">
    <ul>
      <li>
        <s class="s3"></s>
        发布时间
      </li>
      <li>
        <s class="s1"></s>
        筛选
      </li>
      <li>
        <s class="s2"></s>
        智能排序
      </li>
    </ul>
  </div>
  <dl class="search" style="display: none">
    <dd class="box-dl pl0">
      <p class="checked"  onclick="window.location.href = window.location.pathname+'?a=1'">发布时间由远及近</p>
      <p  onclick="window.location.href = window.location.pathname+'?a=2'">发布时间由近及远</p>
    </dd>
    <dd class="box-dl reset">
      <div class="box-scroll">
        <dl class="clear-fix">
          <dt>性别</dt>
          <dd onclick="selectRadio(this)">男</dd>
          <dd onclick="selectRadio(this)">女</dd>
        </dl>
        <dl class="clear-fix">
          <dt>诺级</dt>
          <dd onclick="selectRadio(this)">5诺以下</dd>
          <dd onclick="selectRadio(this)">10诺以下</dd>
          <dd onclick="selectRadio(this)">20诺以下</dd>
          <dd onclick="selectRadio(this)">30诺以上</dd>
        </dl>
        <dl class="clear-fix">
          <dt>距离</dt>
          <dd onclick="selectRadio(this)">5km以下</dd>
          <dd onclick="selectRadio(this)">10km以下</dd>
          <dd onclick="selectRadio(this)">20km以下</dd>
          <dd onclick="selectRadio(this)">30km以上</dd>
        </dl>
        <dl class="clear-fix">
          <dt>结束时间</dt>
          <dd class="checked" onclick="selectRadio(this)">1天内</dd>
          <dd onclick="selectRadio(this)">2周内</dd>
          <dd onclick="selectRadio(this)">1月内</dd>
          <dd onclick="selectRadio(this)">3月以上</dd>
        </dl>
        <dl class="clear-fix">
          <dt>参与人数</dt>
          <dd onclick="selectRadio(this)">10人内</dd>
          <dd onclick="selectRadio(this)">50人内</dd>
          <dd onclick="selectRadio(this)">100人内</dd>
          <dd onclick="selectRadio(this)">500人以上</dd>
        </dl>
        <dl class="search-put clear-fix">
        <dt>预算</dt>
        <dd><input type="tel" name="a1Start"></dd>
        <dd class="and">至</dd>
        <dd><input type="tel" name="a1End"></dd>
        <dd class="and">元</dd>
      </dl>
      </div>
      <div class="add-address">
        <div class="search-submit ">
          <div class="button reset" onclick="reset()">重 置</div>
          <div class="button ok" onclick="submitSearch()">确  定</div>
        </div>
      </div>

    </dd>
    <dd class="box-dl pl0">
      <p onclick="window.location.href = window.location.pathname+'?name=1'">按照结束时间远近</p>
      <p onclick="window.location.href = window.location.pathname+'?name=2'">按照诺级高低排序</p>
      <p onclick="window.location.href = window.location.pathname+'?name=3'">按距离远近</p>
      <p onclick="window.location.href = window.location.pathname+'?name=4'">按预算多少</p>
      <p onclick="window.location.href = window.location.pathname+'?name=5'">按参与人数多少排序 </p>
    </dd>
  </dl>

</div>
<ul class="list context box-scroll clear-fix">
  <li>
    <a href="details.html">
      <img class="top" src="../images/lazyloadImg.jpg" data-original="../images/img.jpg" alt="">
      <p>本人求购200斤金桔价
        格好商量</p>
      <h3 class="clear-fix">
        <s class="fl colec2">预算:1000元</s>
        <span class="fr">结束:<i>8天</i></span>
      </h3>
      <div class="bottom">
        <img src="../images/lazyloadImg.jpg" data-original="../images/img.jpg" alt="">
        马靖昊&nbsp;
        <i class="index-num">1诺&nbsp;10次</i>
      </div>
    </a>
  </li>
  <li>
    <a href="details.html">
      <img class="top" src="../images/lazyloadImg.jpg" data-original="../images/img.jpg" alt="">
      <p>本人求购200斤金桔价
        格好商量</p>
      <h3 class="clear-fix">
        <s class="fl colec2">预算:1000元</s>
        <span class="fr">结束:<i>8天</i></span>
      </h3>
      <div class="bottom">
        <img src="../images/lazyloadImg.jpg" data-original="../images/img.jpg" alt="">
        马靖昊&nbsp;
        <i class="index-num">1诺&nbsp;10次</i>
      </div>
    </a>
  </li>
  <li>
    <a href="details.html">
      <img class="top" src="../images/lazyloadImg.jpg" data-original="../images/img.jpg" alt="">
      <p>本人求购200斤金桔价
        格好商量</p>
      <h3 class="clear-fix">
        <s class="fl colec2">预算:1000元</s>
        <span class="fr">结束:<i>8天</i></span>
      </h3>
      <div class="bottom">
        <img src="../images/lazyloadImg.jpg" data-original="../images/img.jpg" alt="">
        马靖昊&nbsp;
        <i class="index-num">1诺&nbsp;10次</i>
      </div>
    </a>
  </li>
  <li>
    <a href="details.html">
      <img class="top" src="../images/lazyloadImg.jpg" data-original="../images/img.jpg" alt="">
      <p>本人求购200斤金桔价
        格好商量</p>
      <h3 class="clear-fix">
        <s class="fl colec2">预算:1000元</s>
        <span class="fr">结束:<i>8天</i></span>
      </h3>
      <div class="bottom">
        <img src="../images/lazyloadImg.jpg" data-original="../images/img.jpg" alt="">
        马靖昊&nbsp;
        <i class="index-num">1诺&nbsp;10次</i>
      </div>
    </a>
  </li>
  <li>
    <a href="details.html">
      <img class="top" src="../images/lazyloadImg.jpg" data-original="../images/img.jpg" alt="">
      <p>本人求购200斤金桔价
        格好商量</p>
      <h3 class="clear-fix">
        <s class="fl colec2">预算:1000元</s>
        <span class="fr">结束:<i>8天</i></span>
      </h3>
      <div class="bottom">
        <img src="../images/lazyloadImg.jpg" data-original="../images/img.jpg" alt="">
        马靖昊&nbsp;
        <i class="index-num">1诺&nbsp;10次</i>
      </div>
    </a>
  </li>
  <li>
    <a href="details.html">
      <img class="top" src="../images/lazyloadImg.jpg" data-original="../images/img.jpg" alt="">
      <p>本人求购200斤金桔价
        格好商量</p>
      <h3 class="clear-fix">
        <s class="fl colec2">预算:1000元</s>
        <span class="fr">结束:<i>8天</i></span>
      </h3>
      <div class="bottom">
        <img src="../images/lazyloadImg.jpg" data-original="../images/img.jpg" alt="">
        马靖昊&nbsp;
        <i class="index-num">1诺&nbsp;10次</i>
      </div>
    </a>
  </li>
</ul>



<div class="mask-release" onclick="hideMask()">
  <a href="../seekBuy/release.html" class="icon1"></a>
  <a href="../service/index.html" class="icon2"></a>
</div>
<footer>
  <dl class="clear-fix">
    <dd>
      <a href="../index.html">
        <i class="index-page checked"></i>
        <s>首页</s>
      </a>
    </dd>
    <dd>
      <a href="/list.html">
        <i class="demand-page"></i>
        <s>求购</s>
      </a>
    </dd>
    <dd onclick="showMask()">
      <a href="javascript:void(0)">
        <i class="add-page"></i>
        <s class="text">发布</s>
      </a>
    </dd>
    <dd>
      <a href="../center/personal.html">
        <i class="msg-page"></i>
        <s>主页</s>
      </a>
    </dd>
    <dd >
      <a href="../center/index.html">
        <i class="my-page "></i>
        <s>我的</s>
      </a>
    </dd>
  </dl>
</footer>
</body>
</html>
<script>
    // 切换
    $('.search .box-dl').each(function (index,current) {
        if($(current).find('.checked').length>0){
            $('.buy-sub-nav li').eq(index).addClass('checked')
        }
    })

    $('.buy-sub-nav li').on('click',function () {
        let self = $('.search .box-dl').eq($(this).index());
        if(self.is(":hidden")){
            $('.search').show();
            $(this).addClass('checked');
            self.show().siblings().hide();
        }else{
            $('.search').hide();
            if($('.search .box-dl').eq($(this).index()).find('.checked').length>0){
                $(this).addClass('checked');
            }else{
                $(this).removeClass('checked');
            }
        }
    })

    // 重置
    function reset() {
        $('.reset').find('dd').removeClass('checked')
    }
    // 提交搜索
    function submitSearch() {
        let a1Start = $.trim($('input[name="a1Start"]').val());
        let a1End = $.trim($('input[name="a1End"]').val());
        let isA1 = a1Start !== '' && a1End !== '';
        if(a1Start==='' && a1End === ''){
            isA1 = true
        }else{
            if((/^[0-9]*[1-9][0-9]*$/).test(a1Start) && (/^[0-9]*[1-9][0-9]*$/).test(a1End)){
                isA1 = true
            }else{
                isA1 = false
            }
        }
        if(!isA1){
            titleMsg('预算输入有误')
            return false
        }

        alert('验证通过')
        console.log($('.box-dl dd.checked').text())
        $('.search').hide()
    }

    // 选择单选
    function selectRadio(e) {
        $(e).toggleClass('checked').siblings().removeClass('checked')
    }


    //翻頁

    $(function () {
        $('.context').css('height',$(window).height()-$('.context').offset().top+'px');

        //滚动加载方法1
        //滚动加载方法1
        var page =1,off_on = false
        var LoadingDataFn = function() {
            for (var i = 0; i < 10; i++) {
                let dom = $(' <li>\n' +
                    '    <a href="details.html">\n' +
                    '      <img class="top" src="../images/lazyloadImg.jpg" data-original="../images/img.jpg" alt="">\n' +
                    '      <p>本人求购200斤金桔价\n' +
                    '        格好商量</p>\n' +
                    '      <h3 class="clear-fix">\n' +
                    '        <s class="fl colec2">预算:1000元</s>\n' +
                    '        <span class="fr">结束:<i>8天</i></span>\n' +
                    '      </h3>\n' +
                    '      <div class="bottom">\n' +
                    '        <img src="../images/lazyloadImg.jpg" data-original="../images/img.jpg" alt="">\n' +
                    '        马靖昊&nbsp;\n' +
                    '        <i class="index-num">1诺&nbsp;10次</i>\n' +
                    '      </div>\n' +
                    '    </a>\n' +
                    '  </li>');
                $('.context').append(dom);
            }
            //
            // lazyLoad.refresh(true);
            off_on = true; //[重要]这是使用了 {滚动加载方法1}  时 用到的 ！！！[如果用  滚动加载方法1 时：off_on 在这里不设 true的话， 下次就没法加载了哦！]

        };
        LoadingDataFn()
        $('.context').scroll(function() {
            $("img").lazyload({refresh:true});
            //当时滚动条离底部20px时开始加载下一页的内容
            if (($(this)[0].scrollTop + $(this).height() + 60) >= $(this)[0].scrollHeight) {
                //这里用 [ off_on ] 来控制是否加载 （这样就解决了 当上页的条件满足时，一下子加载多次的问题啦）
                if (off_on) {
                    off_on = false;
                    page++;
                    console.log("第"+page+"页")
                    LoadingDataFn();  //调用执行上面的加载方法
                }
            }
        });
    });


    function showMask() {
        $('.mask-release').show()
    }
    function hideMask() {
        $('.mask-release').hide()
    }

</script>

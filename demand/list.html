<!doctype html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport"
        content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
  <link rel="stylesheet" href="../css/swiper.min.css">
  <script src="../js/swiper.min.js"></script>
  <script src="../js/h5rem.js"></script>
  <link rel="stylesheet" href="../css/style.css">
  <script src="../js/jquery-2.1.4.min.js"></script>
  <script src="../js/public.js"></script>
</head>
<body>
<!--返回上一页-->
<div class="return">
  <i onclick="history.go(-1)"></i>
  求购列表
</div>
<div class="voucher">
  <div class="voucher-mask"></div>
  <div class="buy-sub-nav">
    <ul>
      <li onclick="search()">服务类型</li>
      <li onclick="search()">筛选</li>
      <li onclick="search()">智能排序</li>
    </ul>
  </div>
  <ul class="my-item">
    <li>
      <a href="participate/participateDetails.html">
        <img src="../images/img.jpg" alt="">
        <div class="item-col">
          <h4 class="clear-fix">
            <span>金喜善</span>
            <i class="index-num">1诺&nbsp;10次</i>
            <i class="nan">18</i>
            <s class="fr">进行中</s>
          </h4>
          <h6 class="clear-fix">
            <span class="fl">预算：<b class="colec2">1000元</b></span>
            <s class="fr col1cc419">未缴纳</s>
          </h6>
          <h3 class="clear-fix">
            本人求购橙子，价格好商量好商好商价格好商量好商好商好商好
          </h3>
        </div>
      </a>
    </li>
    <li>
      <a href="participate/participateDetails.html">
        <img src="../images/img.jpg" alt="">
        <div class="item-col">
          <h4 class="clear-fix">
            <span>金喜善</span>
            <i class="index-num">1诺&nbsp;10次</i>
            <i class="nan">18</i>
            <s class="fr">进行中</s>
          </h4>
          <h6 class="clear-fix">
            <span class="fl">预算：<b class="colec2">1000元</b></span>
            <s class="fr col1cc419">已缴纳</s>
          </h6>
          <h3 class="clear-fix">
            本人求购橙子，价格好商量好商好商价格好商量好商好商好商好
          </h3>
        </div>
      </a>
    </li>
    <li>
      <a href="my/myDetails.html">
        <img src="../images/img.jpg" alt="">
        <div class="over-icon"></div>
        <div class="item-col">
          <h4 class="clear-fix">
            <span>金喜善</span>
            <i class="index-num">1诺&nbsp;10次</i>
            <i class="nan">18</i>
            <!--<s class="fr">进行中</s>-->
          </h4>
          <h6 class="clear-fix">
            <span class="fl">预算：<b class="colec2">1000元</b></span>
            <s class="fr">已缴纳</s>
          </h6>
          <h3 class="clear-fix">
            本人求购橙子，价格好商量好商好商价格好商量好商好商好商好
          </h3>
        </div>
      </a>
    </li>

  </ul>
</div>
<div style="display: none" class="search">
  <ul class="clear-fix">
    <li class="checked">服务类型<s>&gt;</s></li>
    <li>筛选<s>&gt;</s></li>
    <li>智能排序<s>&gt;</s></li>
  </ul>
  <div style="display: block" class="box-dl">
    <dl class="clear-fix">
      <dt onclick="follow(this)">特色分类1</dt>
      <dd class="checked" onclick="follow(this)">扶贫专区</dd>
      <dd onclick="follow(this)">慈善服务</dd>
    </dl>
    <dl class="clear-fix">
      <dt>产品</dt>
      <dd onclick="follow(this)" class="checked">日常用品</dd>
      <dd onclick="follow(this)">大宗商品</dd>
      <dd onclick="follow(this)">日常用品</dd>
      <dd onclick="follow(this)">大宗商品</dd>
      <dd onclick="follow(this)">日常用品</dd>
      <dd onclick="follow(this)">大宗商品</dd>
    </dl>
    <dl class="clear-fix">
      <dt>技能</dt>
      <dd onclick="follow(this)" class="checked">日常用品</dd>
      <dd onclick="follow(this)">大宗商品</dd>
      <dd onclick="follow(this)">日常用品</dd>
      <dd onclick="follow(this)">大宗商品</dd>
      <dd onclick="follow(this)">日常用品</dd>
      <dd onclick="follow(this)">大宗商品</dd>
    </dl>
    <dl class="clear-fix">
      <dt>服务</dt>
      <dd onclick="follow(this)" class="checked">日常用品</dd>
      <dd onclick="follow(this)">大宗商品</dd>
      <dd onclick="follow(this)">日常用品</dd>
      <dd onclick="follow(this)">大宗商品</dd>
      <dd onclick="follow(this)">日常用品</dd>
      <dd onclick="follow(this)">大宗商品</dd>
      <dd onclick="follow(this)">大宗商品</dd>
      <dd onclick="follow(this)">大宗商品</dd>
    </dl>
  </div>
  <div class="box-dl center">
    <dl class="clear-fix">
      <dt>性别</dt>
      <dd class="checked" onclick="selectRadio(this)">男</dd>
      <dd onclick="selectRadio(this)">女</dd>
    </dl>
    <dl class="clear-fix">
      <dt>诺级</dt>
      <dd class="checked" onclick="selectRadio(this)">一级</dd>
      <dd onclick="selectRadio(this)">二级</dd>
      <dd onclick="selectRadio(this)">三级</dd>
    </dl>
    <dl class="clear-fix">
      <dt>距离</dt>
      <dd class="checked" onclick="selectRadio(this)">5km内</dd>
      <dd onclick="selectRadio(this)">1215km内</dd>
      <dd onclick="selectRadio(this)">512km内</dd>
      <dd onclick="selectRadio(this)">大宗商品</dd>
      <dd onclick="selectRadio(this)">日常用品</dd>
      <dd onclick="selectRadio(this)">大宗商品</dd>
    </dl>
    <dl class="clear-fix">
      <dt>时间</dt>
      <dd class="checked" onclick="selectRadio(this)">1天内</dd>
      <dd onclick="selectRadio(this)">一周内</dd>
      <dd onclick="selectRadio(this)">1月内</dd>
    </dl>
    <dl class="clear-fix">
      <dt>发行额</dt>
      <dd><input type="tel" name="a1Start"></dd>
      <dd class="and">至</dd>
      <dd><input type="tel" name="a1End"></dd>
    </dl>
    <dl class="clear-fix">
      <dt>认购价</dt>
      <dd><input type="tel" name="a2Start"></dd>
      <dd class="and">至</dd>
      <dd><input type="tel" name="a2End"></dd>
    </dl>

  </div>
  <div class="box-dl pl0">
    <p onclick="selectRadio(this)" class="checked">按照发布时间远近排序</p>
    <p onclick="selectRadio(this)">按照发售额大小排序</p>
    <p onclick="selectRadio(this)">按认购价格高低排序</p>
    <p onclick="selectRadio(this)">按照距离远近排序</p>
    <p onclick="selectRadio(this)">全部内容</p>
  </div>
  <div class="search-submit">
    <div class="button reset">重 置</div>
    <div class="button ok" onclick="submitSearch()">确  定</div>
  </div>
</div>
</body>
</html>
<script>
    function search() {
        $('.search').show()
    }
    // 选择多选
    function follow(e) {
        $(e).toggleClass('checked')
    }
    // 选择单选
    function selectRadio(e) {
        $(e).toggleClass('checked').siblings().removeClass('checked')
    }


    $('.search li').on('click',function () {
        $(this).addClass('checked').siblings().removeClass('checked');
        $(this).hasClass('checked') ?
            $('.box-dl').eq($(this).index()).show().siblings('.box-dl').hide()
            : $('.box-dl').eq($(this).index()).hide().siblings('.box-dl').hide()
    })

    function submitSearch() {
        let a1Start = $.trim($('input[name="a1Start"]').val());
        let a1End = $.trim($('input[name="a1End"]').val());
        let a2Start = $.trim($('input[name="a2Start"]').val());
        let a2End = $.trim($('input[name="a2End"]').val());
        let isA1 = a1Start !== '' && a1End !== '';
        if(a1Start==='' && a1End === ''){
            isA1 = true
        }else{
            if((/^[0-9]*[1-9][0-9]*$/).test(a1Start) && (/^[0-9]*[1-9][0-9]*$/).test(a1End)){
                isA1 = true
            }else{
                isA1 = false
            }
        }

        let isA2 = a2Start !== '' && a2End !== '';
        if(a2Start === '' && a2End === ''){
            isA2 = true
        }else{
            if((/^[0-9]*[1-9][0-9]*$/).test(a2Start) && (/^[0-9]*[1-9][0-9]*$/).test(a2End)){
                isA2 = true
            }else{
                isA2 = false
            }
        }
        if(!isA1){
            titleMsg('发行额输入有误')
            return false
        }
        if(!isA2){
            titleMsg('认购价输入有误')
            return false
        }
        alert('验证通过')

        // ajax

        console.log($('.search dd.checked').text() +"-"+$('.box-dl p.checked').text())
          $('.search').hide()



    }


    function closeDl(e) {
        $('.buy-sub-nav dl,.voucher-mask').hide()
        $(e).addClass('checked').siblings().removeClass('checked');
    }
    //翻頁
    $(function () {
        $('.my-item').css('height',$(window).height()-$('.my-item').offset().top+'px');

        //滚动加载方法1
        //滚动加载方法1
        var page =1,off_on = false
        var LoadingDataFn = function() {
            var dom = '';
            for (var i = 0; i < 5; i++) {
                dom += '<li><img src="http://www.jq22.com/img/cs/500x500a.png" width="100%"/><span>上滑列加载表内容上滑列加载表内容上滑列加载表内容上滑列加载表内容</span></li>';
            }
            $('.my-item').append(dom);
            off_on = true; //[重要]这是使用了 {滚动加载方法1}  时 用到的 ！！！[如果用  滚动加载方法1 时：off_on 在这里不设 true的话， 下次就没法加载了哦！]
        };
        LoadingDataFn()
        $('.my-item').scroll(function() {
            //当时滚动条离底部60px时开始加载下一页的内容
            if (($(this)[0].scrollTop + $(this).height() + 10) >= $(this)[0].scrollHeight) {
                //这里用 [ off_on ] 来控制是否加载 （这样就解决了 当上页的条件满足时，一下子加载多次的问题啦）
                console.log('1')
                if (off_on) {
                    console.log('2')
                    off_on = false;
                    page++;
                    console.log("第"+page+"页");
                    LoadingDataFn();  //调用执行上面的加载方法
                }
            }
        });
    })
</script>

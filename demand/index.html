<!doctype html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport"
        content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
  <link rel="stylesheet" href="../css/swiper.min.css">
  <script src="../js/swiper.min.js"></script>
  <script src="../js/h5rem.js"></script>
  <link rel="stylesheet" href="../css/style.css">
  <script src="../js/jquery-2.1.4.min.js"></script>
  <script src="../js/public.js"></script>
</head>
<body>
<!--返回上一页-->
<div class="return">
  <i onclick="history.go(-1)"></i>
  我的求购
</div>
<div class="voucher">
  <div class="voucher-mask"></div>
  <ul class="buy-nav">
    <li class="col1cc419" onclick="a(0)">我发布的求购</li>
    <li onclick="a(1)">我参与的求购</li>
  </ul>
  <div class="buy-sub-nav">
    <ul>
      <li onclick="b(0)">发行时间</li>
      <li onclick="b(1)">筛选</li>
      <li onclick="b(2)">求购预算</li>
    </ul>
    <dl>
      <dd class="checked" onclick="closeDl(this)">发行时间由近到远</dd>
      <dd onclick="closeDl(this)">发行时间由远到近</dd>
      <dd onclick="closeDl(this)">全部内容</dd>
    </dl>
    <dl class="menu">
      <dd>
        <label>保证金：</label>
        <span onclick="spanChecked(this)" class="checked">全部</span>
        <span onclick="spanChecked(this)">已缴纳</span>
        <span onclick="spanChecked(this)" >未缴纳</span>
      </dd>
      <dd>
        <label>是否中选：</label>
        <span onclick="spanChecked(this)" class="checked">全部</span>
        <span onclick="spanChecked(this)">中选</span>
        <span onclick="spanChecked(this)" >落选</span>
      </dd>
      <dd>
        <label>求购状态：</label>
        <span onclick="spanChecked(this)" class="checked">全部</span>
        <span onclick="spanChecked(this)">待发布</span>
        <span onclick="spanChecked(this)" >进行中</span>
        <span onclick="spanChecked(this)" >已结束</span>
      </dd>
      <dd class="menu-list">
        <div class="span-btn cz" onclick="resetChecked(this)">重置</div>
        <div class="span-btn qd" onclick="closeDl(this)">确定</div>
      </dd>
    </dl>
    <dl>
      <dd onclick="closeDl(this)">发行金额由多到少</dd>
      <dd onclick="closeDl(this)">发行金额由少到多</dd>
      <dd onclick="closeDl(this)">全部内容</dd>
    </dl>

  </div>
  <ul class="my-item">
    <li>
      <img src="../images/img.jpg" alt="">
      <div class="item-col">
        <h4 class="clear-fix">
          <span>金喜善</span>
          <i class="index-num">1诺&nbsp;10次</i>
          <i class="nan">18</i>
          <s class="fr">进行中</s>
        </h4>
        <h6 class="clear-fix">
          <span class="fl">预算：<b class="colec2">1000元</b></span>
          <s class="fr col1cc419">未缴纳</s>
        </h6>
        <h3 class="clear-fix">
          本人求购橙子，价格好商量好商好商价格好商量好商好商好商好
        </h3>
      </div>

    </li>
    <li>
      <img src="../images/img.jpg" alt="">
      <div class="item-col">
        <h4 class="clear-fix">
          <span>金喜善</span>
          <i class="index-num">1诺&nbsp;10次</i>
          <i class="nan">18</i>
          <s class="fr">进行中</s>
        </h4>
        <h6 class="clear-fix">
          <span class="fl">预算：<b class="colec2">1000元</b></span>
          <s class="fr col1cc419">已缴纳</s>
        </h6>
        <h3 class="clear-fix">
          本人求购橙子，价格好商量好商好商价格好商量好商好商好商好
        </h3>
      </div>

    </li>
    <li>
      <img src="../images/img.jpg" alt="">
      <div class="over-icon"></div>
      <div class="item-col">
        <h4 class="clear-fix">
          <span>金喜善</span>
          <i class="index-num">1诺&nbsp;10次</i>
          <i class="nan">18</i>
          <!--<s class="fr">进行中</s>-->
        </h4>
        <h6 class="clear-fix">
          <span class="fl">预算：<b class="colec2">1000元</b></span>
          <s class="fr">已缴纳</s>
        </h6>
        <h3 class="clear-fix">
          本人求购橙子，价格好商量好商好商价格好商量好商好商好商好
        </h3>
      </div>

    </li>

  </ul>

</div>

</body>
</html>
<script>
    function a(num) {
        $('.buy-nav li').eq(num).addClass('col1cc419').siblings().removeClass('col1cc419')
    }
    function b(snum) {
        // debugger
        if($('.buy-sub-nav dl').eq(snum).css('display') == 'none'){
            $('.voucher-mask').show()
        }else{
            $('.voucher-mask').hide()
        }
        $('.buy-sub-nav ul li').eq(snum).addClass('col1cc419').siblings().removeClass('col1cc419');
        $('.buy-sub-nav dl').eq(snum).slideToggle().siblings('dl').hide();
    }
    function closeDl(e) {

        $('.buy-sub-nav dl,.voucher-mask').hide()
        $(e).addClass('checked').siblings().removeClass('checked');
    }


    // 確定
    function spanChecked(e) {
        $(e).addClass('checked').siblings().removeClass('checked');
        // $('.buy-sub-nav dl').hide()
    }
    // 重置
    function resetChecked() {
        $('.menu span').removeClass('checked');
        $('.menu dd').each(function (a,b) {
            $(b).find('span').eq(0).addClass('checked')
        })
    }

    //翻頁
    $(function () {
        $('.my-item').css('height',$(window).height()-$('.my-item').offset().top+'px');

        //滚动加载方法1
        //滚动加载方法1
        var page =1,off_on = false
        var LoadingDataFn = function() {
            var dom = '';
            for (var i = 0; i < 5; i++) {
                dom += '<li><img src="http://www.jq22.com/img/cs/500x500a.png" width="100%"/><span>上滑列加载表内容上滑列加载表内容上滑列加载表内容上滑列加载表内容</span></li>';
            }
            $('.my-item').append(dom);
            off_on = true; //[重要]这是使用了 {滚动加载方法1}  时 用到的 ！！！[如果用  滚动加载方法1 时：off_on 在这里不设 true的话， 下次就没法加载了哦！]
        };
        LoadingDataFn()
        $('.my-item').scroll(function() {
            //当时滚动条离底部60px时开始加载下一页的内容
            if (($(this)[0].scrollTop + $(this).height() + 10) >= $(this)[0].scrollHeight) {
                //这里用 [ off_on ] 来控制是否加载 （这样就解决了 当上页的条件满足时，一下子加载多次的问题啦）
                console.log('1')
                if (off_on) {
                    console.log('2')
                    off_on = false;
                    page++;
                    console.log("第"+page+"页");
                    LoadingDataFn();  //调用执行上面的加载方法
                }
            }
        });
    })
</script>

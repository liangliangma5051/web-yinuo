<!doctype html>
<!--suppress ALL -->
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport"
        content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
  <script src="../../js/h5rem.js"></script>
  <link rel="stylesheet" href="../../css/style.css">
  <script src="../../js/jquery-2.1.4.min.js"></script>
  <link rel="stylesheet" href="../../css/swiper.min.css">
  <script src="../../js/swiper.min.js"></script>
  <script src="../../js/public.js"></script>
  <script src="../../js/dataSelect.js"></script>
</head>
<body>
<!--返回上一页-->
<div class="release1" style="display: block">
  <div class="return">
    <i onclick="history.go(-1)"></i>
    发布求购
  </div>

  <div class="release">
    <!--发布内容1-->
    <div class="swiper-container">
      <div class="swiper-wrapper">
        <div class="release-context swiper-slide">
          <ul>
            <li>
              <label>求购类型</label>
              <input type="text"  label="求购类型"  pattern="1" placeholder="请选择需求所属的服务类型" name="type" readonly>
              <div class="select" onclick="select()" >
                <i></i>
              </div>
            </li>
            <li>
              <label>预算</label>
              <input type="tel"  label="预算"   pattern="1,/^[0-9]*[1-9][0-9]*$/" placeholder="当前上限10000元">
              <div class="select">
                元
              </div>
            </li>
            <li class="text-area">
              <label>保证金</label>
              <input type="tel" label="保证金" value="0" pattern="1,/^[0-9]*[1-9][0-9]*$/" placeholder="">
              <span class="current-text-area">（当前5%）</span>
              <div class="clear"></div>
              <span>备注:每违约1次增加1%抱枕就，30%封顶</span>
              <div class="select">
                元
              </div>
            </li>
            <li>
              <label>截止日期</label>
              <input type="text" id="dataResults" readonly  placeholder="最长不超过6个月" label="截止日期" pattern="1">
              <div class="select" onclick="selectTime(new Date().getFullYear()+0.5)">
                <i></i>
              </div>
            </li>
            <li class="text-area">
              <label>求购标题</label>
              <textarea maxlength="50"  label="求购标题"  pattern="1" onkeydown="textLen(this)" placeholder="输入需求名称，让人更方便找到"></textarea>
              <p class="text-length"><s>0</s>/50</p>
            </li>
            <li class="text-area">
              <label>求购内容</label>
              <textarea maxlength="200"  label="求购内容"  pattern="1" onkeydown="textLen(this)" placeholder="请描述您的需求内容"></textarea>
              <p class="text-length"><s>0</s>/200</p>
            </li>
          </ul>
          <div class="release">
            <ul>
              <li class="service-pic">
                <label>求购图片</label>
                <p>至少1张图片最多4张，单张小于5M</p>
                <div class="clear"></div>
                <div pattern="itemIsNull" label="求购图片" class="upload-img clear-fix" id="upload-img1">
                  <!-- <div class="item">
                     <img src="" alt="">
                     <div class="delete-img"><s></s></div>
                   </div>-->
                  <div class="load-file">
                    <input id="upload1" type="file" multiple="multiple" accept="image/*">
                  </div>
                </div>
              </li>
            </ul>

          </div>
          <div class="next" onclick="submitNext()">
            下一步
          </div>
        </div>
        <!--选择服务类型-->
        <div class="release-type swiper-slide">
          <div class="search">
            <div style="display: block" class="box-dl">
              <dl class="type clear-fix">
                <dt>特色分类</dt>
                <dd class="checked" onclick="follow(this)">
                  <i class="type1"></i>
                  扶贫专区
                </dd>
                <dd class="type2" onclick="follow(this)">
                  <i class="type2"></i>
                  慈善服务
                </dd>
              </dl>
              <dl class="clear-fix">
                <dt>产品</dt>
                <dd onclick="follow(this)">日常用品</dd>
                <dd onclick="follow(this)">大宗商品</dd>
                <dd onclick="follow(this)">小商品</dd>
                <dd onclick="follow(this)">农林产品</dd>
                <dd onclick="follow(this)">手工制品</dd>
                <dd onclick="follow(this)">家具用品</dd>
                <dd onclick="follow(this)">创意产品</dd>
                <dd onclick="follow(this)">其他产品</dd>
              </dl>
              <dl class="clear-fix">
                <dt>技能</dt>
                <dd onclick="follow(this)">日常用品</dd>
                <dd onclick="follow(this)">大宗商品</dd>
                <dd onclick="follow(this)">小商品</dd>
                <dd onclick="follow(this)">农林产品</dd>
                <dd onclick="follow(this)">手工制品</dd>
                <dd onclick="follow(this)">家具用品</dd>
                <dd onclick="follow(this)">创意产品</dd>
                <dd onclick="follow(this)">其他产品</dd>
              </dl>
              <dl class="clear-fix">
                <dt>服务</dt>
                <dd onclick="follow(this)">日常用品</dd>
                <dd onclick="follow(this)">大宗商品</dd>
                <dd onclick="follow(this)">小商品</dd>
                <dd onclick="follow(this)">农林产品</dd>
                <dd onclick="follow(this)">手工制品</dd>
                <dd onclick="follow(this)">家具用品</dd>
                <dd onclick="follow(this)">创意产品</dd>
                <dd onclick="follow(this)">其他产品</dd>
              </dl>
              <dl class="clear-fix">
                <dt>其他</dt>
                <dd style="border:0;">
                  <div class="add-label" onclick="$('.zdy').show()"></div>
                </dd>
              </dl>
            </div>
          </div>
        </div>
        <!--选择服务单位-->

      </div>
    </div>
    <div class="mask"></div>
    <dl class="release-company">
      <dd onclick="releaseCompany(this)">个</dd>
      <dd onclick="releaseCompany(this)">只</dd>
      <dd onclick="releaseCompany(this)">兜</dd>
    </dl>
  </div>
</div>
<div class="mask zdy" style="display: none">
  <div class="context">
    <div class="clear-fix">
      <input type="text" placeholder="自定义服务类型最多8个字" maxlength="8">
      <div class="btn">确定</div>
    </div>
    <div class="close" onclick="$('.zdy').hide()"></div>
  </div>
</div>
<div class="release2" style="display: none">

  <div class="return">
    <i></i>
    预览
  </div>
  <div class="demand-body">
    <p class="title">本人求购200斤金桔，价格好商量 <span class="fr colec2">进行中</span></p>
    <div class="state clear-fix">
      <ul class="state-progress">
        <li class="checked"></li>
        <li></li>
        <li  class="checked"></li>
        <li></li>
        <li></li>
        <!--<li></li>-->
      </ul>
      <p class="progress-text">
        <span>发布需求</span>
        <span>缴纳保证金</span>
        <span>等待接单</span>
        <span>服务认购</span>
        <span>需求关闭</span>
      </p>
      <dl>
        <dd>
          <label>预算</label>
          <span>1000元</span>
        </dd>
        <dd>
          <label>离结束</label>
          <span>8天</span>
        </dd>
        <dd>
          <label class="font24">保证金</label>
          <span class="font24">500元（未缴纳）</span>
        </dd>
        <dd class="font24 col999">
          03/26 15:36
        </dd>
      </dl>
    </div>
    <div class="release">
      <ul>
        <li class="text-area">
          <label>需求内容</label>
          <span>需要金桔100金，价格好商量有意者找我私聊。</span>
        </li>
      </ul>
    </div>
    <div class="hei20e9f"></div>

    <!--需求圖片-->
    <div class="demand-pic">
      <h4>需求图片</h4>
      <img src="../../images/img.jpg" alt="">
      <img src="../../images/img.jpg" alt="">
      <img src="../../images/img.jpg" alt="">
    </div>


  </div>
  <div class="fixed-all-checked">
    <dl>
      <dd onclick="releasePrev()">修改</dd>
      <!--<dd class="style" onclick="openMaskCol()">发布</dd>-->
      <dd class="style" onclick="openMaskCol()">缴纳保证金(剩余26H)</dd>
      <!--<dd class="style">结束(剩余8天)</dd>-->
    </dl>

  </div>
  <div class="mask"  style="display: none"></div>
  <div class="mask-col" style="display: none">
    <i class="close" onclick="closeMaskCol()"></i>
    <p>想要吸引更多高手帮您解决烦恼，</p>
    <p>还需要缴纳少量保证金哦！</p>
    <p>如超过72小时未缴纳,会被系统收回！</p>
    <div class="btn" onclick="closeMaskCol()">
      暂不缴纳
    </div>
    <a href="../../details/payment.html" class="btn">
      立刻缴纳
    </a>
  </div>

</div>





<!--日期必须的HTML-->
<div class="mask" id="data-mask" style="display: none"></div>
<div class="data-select" style="display: none">
  <div class="clear-fix">
    <div class="time-btn fl" onclick="hideTime()">取消</div>
    <div class="time-btn fr" onclick="idDate()">确定</div>
  </div>
  <!--年-月-日-->
  <div class="time-context">
    <div class="swiper-container-nian">
      <ul class="swiper-wrapper data-years" >

      </ul>
    </div>
    <div class="swiper-container-yue">
      <ul class="swiper-wrapper data-month" >
      </ul>
    </div>
    <div class="swiper-container-tian">
      <ul class="swiper-wrapper data-date" >
      </ul>
    </div>
  </div>
</div>

</body>
</html>
<script>
    function textLen(e) {
        $(e).siblings('.text-length').find('s').text($(e).val().length)
    }
    let mySwiper = new Swiper('.swiper-container',{
        allowTouchMove: false,
        init:false
    });
    function select(){
        mySwiper.slideTo(1);
    }
    function follow(e) {
        let className ='checked';
        if($(e).hasClass(className)){
            $(e).removeClass(className)
            $('input[name="type"]').val('')
        }else{
            $('dl dd').removeClass(className);
            $(e).addClass(className);
            $('input[name="type"]').val($.trim($(e).text()))
        }
        mySwiper.slideTo(0);
    }
    function releaseCompany(e) {
        let className ='checked';
        $(e).addClass(className).siblings().removeClass(className);
        $('.release-company').slideUp();
        $('.mask').hide()
        $('input[name="selectCompany"]').val($.trim($(e).text()))
    }
    function selectCompany(e) {
        $('.release-company').slideDown();
        $('.mask').show();
        $('input[name="type"]').val($.trim($(e).text()));
    }

    // 删除图片
    function deleteImg(e) {
        $(e).parents('.upload-img').find('.load-file').show()
        $(e).parent('.item').remove();
    }

    $(function(){
        // 初始化图片上传

        $('#upload1').uploadImg({type:'checkbox',len:4});
        mySwiper.init() //初始化服务类型
    });

    // 身份证 图片删除
    function deleteImgId(self) {
        $(self).siblings('img').remove()
        $(self).hide()
        $(self).siblings('.id-bj, .add-img').show();

    }

    // 下一步验证
    function submitNext() {
        let s = $(".release1").verification({})
        if(s){
            $('.release1').hide()
            $('.release2').show()
        }
    }
    //上一部
    function releasePrev() {
        $('.release1').show()
        $('.release2').hide()
    }

    // 打开
    function openMaskCol(){
        $('.mask,.mask-col').show()
    }

    // 關閉
    function closeMaskCol(){
        $('.mask,.mask-col').hide()
    }
</script>
<script>
    // 确定
    function idDate() {
        if(sYear.n && sYear.y && sYear.d){
            hideTime();
            $('#dataResults').val(sYear.n+'-'+sYear.y+'-'+sYear.d)
            return sYear;
        }else{
            titleMsg('日期选择不正确')
            return false;

        }

    }
    // 取消
    function hideTime() {
        $('.data-select').slideUp()
        $('#data-mask').hide()
    }
</script>
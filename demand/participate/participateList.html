<!doctype html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport"
        content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
  <link rel="stylesheet" href="../../css/swiper.min.css">
  <script src="../../js/swiper.min.js"></script>
  <script src="../../js/h5rem.js"></script>
  <link rel="stylesheet" href="../../css/style.css">
  <script src="../../js/jquery-2.1.4.min.js"></script>
  <script src="../../js/public.js"></script>
</head>
<body>
<!--返回上一页-->
<div class="return">
  <i onclick="history.go(-1)"></i>
  参与者
</div>
<div class="voucher">
  <div class="voucher-mask"></div>
  <div class="buy-sub-nav">
    <ul>
      <li onclick="b(0)">参与时间</li>
      <li onclick="b(1)">发售额</li>
      <li onclick="b(2)">认购价</li>
    </ul>
    <dl>
      <dd onclick="closeDl(this)">参与时间由近到远</dd>
      <dd onclick="closeDl(this)">参与时间由远到近</dd>
      <dd onclick="closeDl(this)">全部内容</dd>
    </dl>
    <dl>
      <dd onclick="closeDl(this)">发售额由少到多</dd>
      <dd onclick="closeDl(this)">发售额由多到少</dd>
      <dd onclick="closeDl(this)" >全部内容</dd>
    </dl>
    <dl>
      <dd onclick="closeDl(this)">认购价由少到多</dd>
      <dd onclick="closeDl(this)">认购价由多到少</dd>
      <dd onclick="closeDl(this)">全部内容</dd>
    </dl>

  </div>
  <ul class="item style2">
    <li>
      <div class="order-top clear-fix">
        <img src="../../images/header-pic.png" alt="">
        <span>金喜善</span>
        <i class="fl index-num">
          <s>1诺&nbsp;10次</s>
        </i>
        <i class="nv">18</i>
        <a class="item-tel">联系TA</a>
      </div>
      <div class="item-context">
        <div class="product clear-fix">
          <label class="checkbox-input">
            <input type="checkbox">
            <span></span>
          </label>
          <img src="../../images/img.jpg" alt="">
          <div class="product-msg">
            <p>陪<b>跑步</b>(60分钟)</p>
            <div class="clear-fix">
              <s>服务</s><span>3天前</span>
            </div>
            <strong>发售额：1200/3000元</strong>
            <div class="progress-bar">
              <p style="width:50%"></p>
            </div>
            <div class="clear-fix">
              <div class="bottom-l fl">26人认购</div>
              <div class="bottom-r fr">认购价：<i><b>200</b>元</i>/份</div>
            </div>
          </div>
        </div>
      </div>
    </li>
    <li>
      <div class="order-top clear-fix">
        <img src="../../images/header-pic.png" alt="">
        <span>金喜善</span>
        <i class="fl index-num">
          <s>1诺&nbsp;10次</s>
        </i>
        <i class="nv">18</i>
        <a class="item-tel">联系TA</a>
      </div>
      <div class="item-context">
        <div class="product clear-fix">
          <label class="checkbox-input">
            <input type="checkbox">
            <span></span>
          </label>
          <img src="../../images/img.jpg" alt="">
          <div class="product-msg">
            <p>陪<b>跑步</b>(60分钟)</p>
            <div class="clear-fix">
              <s>服务</s><span>3天前</span>
            </div>
            <strong>发售额：1200/3000元</strong>
            <div class="progress-bar">
              <p style="width:50%"></p>
            </div>
            <div class="clear-fix">
              <div class="bottom-l fl">26人认购</div>
              <div class="bottom-r fr">认购价：<i><b>200</b>元</i>/份</div>
            </div>
          </div>
        </div>
      </div>
    </li>
  </ul>

</div>
<div class="fixed-all-checked clear-fix" style="display: block">
  <div class="btn left fl">
    <i onclick="followAll(this)"></i>&nbsp;&nbsp;全选
  </div>
  <a href="../../details/settlement.html" class="btn right fr bac1cc419">
    确定收购
  </a>
</div>
</body>
</html>
<script>
    function a(num) {
        $('.buy-nav li').eq(num).addClass('col1cc419').siblings().removeClass('col1cc419')
    }
    function b(snum) {
        // debugger
        if($('.buy-sub-nav dl').eq(snum).css('display') == 'none'){
            $('.voucher-mask').show()
        }else{
            $('.voucher-mask').hide()
        }
        $('.buy-sub-nav ul li').eq(snum).addClass('col1cc419').siblings().removeClass('col1cc419');
        $('.buy-sub-nav dl').eq(snum).slideToggle().siblings('dl').hide();
    }
    function closeDl(e) {

        $('.buy-sub-nav dl,.voucher-mask').hide()
        $(e).addClass('checked').siblings().removeClass('checked');
    }


    function followAll(e){
        if($(e).hasClass('checked')){
            $('.item input[type="checkbox"]').each(function (a,current) {
                $(current).prop('checked',false)
            })
            $(e).removeClass('checked')
        }else{
            $('.item input[type="checkbox"]').each(function (a,current) {
                $(current).prop('checked',true)
            })
            $(e).addClass('checked')
        }

    }


    //翻頁
    $(function () {
        $('.item').css('height',$(window).height()-$('.item').offset().top+'px');

        //滚动加载方法1
        //滚动加载方法1
        var page =1,off_on = false
        var LoadingDataFn = function() {
            var dom = '';
            for (var i = 0; i < 5; i++) {
                dom += '<li><img src="http://www.jq22.com/img/cs/500x500a.png" width="100%"/><span>上滑列加载表内容上滑列加载表内容上滑列加载表内容上滑列加载表内容</span></li>';
            }
            $('.item').append(dom);
            off_on = true; //[重要]这是使用了 {滚动加载方法1}  时 用到的 ！！！[如果用  滚动加载方法1 时：off_on 在这里不设 true的话， 下次就没法加载了哦！]
        };
        LoadingDataFn()
        $('.item').scroll(function() {
            //当时滚动条离底部60px时开始加载下一页的内容
            if (($(this)[0].scrollTop + $(this).height() + 10) >= $(this)[0].scrollHeight) {
                //这里用 [ off_on ] 来控制是否加载 （这样就解决了 当上页的条件满足时，一下子加载多次的问题啦）
                console.log('1')
                if (off_on) {
                    console.log('2')
                    off_on = false;
                    page++;
                    console.log("第"+page+"页");
                    LoadingDataFn();  //调用执行上面的加载方法
                }
            }
        });
    })
</script>

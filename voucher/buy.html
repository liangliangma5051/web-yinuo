<!doctype html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport"
        content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
  <link rel="stylesheet" href="../css/swiper.min.css">
  <script src="../js/swiper.min.js"></script>
  <script src="../js/h5rem.js"></script>
  <link rel="stylesheet" href="../css/style.css">
  <script src="../js/jquery-2.1.4.min.js"></script>
  <script src="../js/public.js"></script>
</head>
<body>
<!--返回上一页-->
<div class="return">
  <i onclick="history.go(-1)"></i>
  购买的诺券
</div>
<div class="voucher">
  <div class="voucher-mask"></div>
  <ul class="buy-nav">
    <li class="col1cc419" onclick="a(0)">发布中的诺券</li>
    <li onclick="a(1)">已结束的诺券</li>
  </ul>
  <div class="buy-sub-nav">
    <ul>
      <li onclick="b(this,0)">发行时间</li>
      <li onclick="b(this,1)">承诺等级</li>
      <li onclick="b(this,2)">发行金额</li>
    </ul>
    <dl>
      <dd class="checked" onclick="closeDl(this)">发行时间由近到远</dd>
      <dd onclick="closeDl(this)">发行时间由远到近</dd>
      <dd onclick="closeDl(this)">全部内容</dd>
    </dl>
    <dl>
      <dd onclick="closeDl(this)">承诺等级由高到低</dd>
      <dd onclick="closeDl(this)">承诺等级由低到高</dd>
      <dd onclick="closeDl(this)">全部内容</dd>
    </dl>
    <dl>
      <dd onclick="closeDl(this)">发行金额由多到少</dd>
      <dd onclick="closeDl(this)">发行金额由少到多</dd>
      <dd onclick="closeDl(this)">全部内容</dd>
    </dl>

  </div>
  <ul class="item">
    <li>
      <div class="order-top clear-fix">
        <img src="../images/header-pic.png" alt="">
        <span>金喜善</span>
        <i class="nv">18</i>
        <a class="item-tel">联系TA</a>
      </div>
      <div class="item-context">
        <div class="card-img">
          <img src="../images/card.jpg" alt="">
          <div class="card-icon">
            <s>2</s>
            <span>11次</span>
          </div>
          <div class="card-name">
            茶语
          </div>
          <div class="card-fu">
            副券
          </div>
          <div class="font-num left">
            <b>30</b>元
          </div>
          <div class="font-num right">
            <b>9</b>份
          </div>
          <div class="font-num total">
            <b>270</b>元
          </div>
          <time class="font-num">2018 03 02</time>
        </div>
        <a href="#">
          发行 ¥231&nbsp;&nbsp;&nbsp;认购 ¥231&nbsp;&nbsp;&nbsp;回购 ¥231
          <span class="fr">
          <i class="voucher-right"></i>
        </span>
        </a>
      </div>
    </li>
    <li>
      <div class="order-top clear-fix">
        <img src="../images/header-pic.png" alt="">
        <span>金喜善</span>
        <i class="nan">18</i>
        <a class="item-tel">联系TA</a>
      </div>
      <div class="item-context">
        <div class="card-img">
          <img src="../images/card.jpg" alt="">
          <div class="card-icon">
            <s>2</s>
            <span>11次</span>
          </div>
          <div class="card-name">
            茶语
          </div>
          <div class="card-fu">
            副券
          </div>
          <div class="font-num left">
            <b>30</b>元
          </div>
          <div class="font-num right">
            <b>9</b>份
          </div>
          <div class="font-num total">
            <b>270</b>元
          </div>
          <time class="font-num">2018 03 02</time>
        </div>
        <a href="#">
          发行 ¥231&nbsp;&nbsp;&nbsp;认购 ¥231&nbsp;&nbsp;&nbsp;回购 ¥231
          <span class="fr">
          <i class="voucher-right"></i>
        </span>
        </a>
      </div>
    </li>
    <li>
      <div class="order-top clear-fix">
        <img src="../images/header-pic.png" alt="">
        <span>金喜善</span>
        <i class="nan">18</i>
        <a class="item-tel">联系TA</a>
      </div>
      <div class="item-context">
        <div class="card-img">
          <img src="../images/card.jpg" alt="">
          <div class="card-icon">
            <s>2</s>
            <span>11次</span>
          </div>
          <div class="card-name">
            茶语
          </div>
          <div class="card-fu">
            副券
          </div>
          <div class="font-num left">
            <b>30</b>元
          </div>
          <div class="font-num right">
            <b>9</b>份
          </div>
          <div class="font-num total">
            <b>270</b>元
          </div>
          <time class="font-num">2018 03 02</time>
        </div>
        <a href="#">
          发行 ¥231&nbsp;&nbsp;&nbsp;认购 ¥231&nbsp;&nbsp;&nbsp;回购 ¥231
          <span class="fr">
          <i class="voucher-right"></i>
        </span>
        </a>
      </div>
    </li>
  </ul>

</div>

</body>
</html>
<script>
  function a(num) {
     $('.buy-nav li').eq(num).addClass('col1cc419').siblings().removeClass('col1cc419')

  }
  function b(event,snum) {
      if($('.buy-sub-nav dl').eq(snum).css('display') == 'none'){
          $('.voucher-mask').show()
      }else{
          $('.voucher-mask').hide()
      }
      $('.buy-sub-nav ul li').eq(snum).addClass('col1cc419').siblings().removeClass('col1cc419');
      $('.buy-sub-nav dl').eq(snum).slideToggle().siblings('dl').hide();

  }
  function closeDl(e) {
      $('.buy-sub-nav dl').hide()
      $(e).addClass('checked').siblings().removeClass('checked');
      $('.voucher-mask').hide()
  }
  //翻頁
  $(function () {
      $('.item').css('height',$(window).height()-$('.item').offset().top+'px');

      //滚动加载方法1
      //滚动加载方法1
      var page =1,off_on = false
      var LoadingDataFn = function() {
          var dom = '';
          for (var i = 0; i < 5; i++) {
              dom += '<li><img src="http://www.jq22.com/img/cs/500x500a.png" width="100%"/><span>上滑列加载表内容上滑列加载表内容上滑列加载表内容上滑列加载表内容</span></li>';
          }
          $('.item').append(dom);
          off_on = true; //[重要]这是使用了 {滚动加载方法1}  时 用到的 ！！！[如果用  滚动加载方法1 时：off_on 在这里不设 true的话， 下次就没法加载了哦！]
      };
      LoadingDataFn()
      $('.item').scroll(function() {
          //当时滚动条离底部60px时开始加载下一页的内容
          if (($(this)[0].scrollTop + $(this).height() + 10) >= $(this)[0].scrollHeight) {
              //这里用 [ off_on ] 来控制是否加载 （这样就解决了 当上页的条件满足时，一下子加载多次的问题啦）
              console.log('1')
              if (off_on) {
                  console.log('2')
                  off_on = false;
                  page++;
                  console.log("第"+page+"页");
                  LoadingDataFn();  //调用执行上面的加载方法
              }
          }
      });
  })
</script>
